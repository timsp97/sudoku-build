webpackJsonp([0],[,,function(t,e,i){i(17);var s=i(0)(i(6),i(28),null,null);t.exports=s.exports},,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(23),n=i.n(s),o=i(22),l=i.n(o),u=i(25),a=i.n(u);e.default={name:"app",components:{Field:n.a,Buttons:l.a,Settings:a.a},data:function(){return{sudoku:{xSize:3,ySize:3,field:[],elapsedTime:0,active:-1},settings:{style:0,difficulty:50},helpMode:!1,isPause:!1,isDone:!1,showMenu:!1,isSettings:!1,isLoading:!1,isZooming:!1,hidden:"",visibilityChange:"",worker:void 0,log:"",lastScale:1,transform:{x:-1,y:-1,deltaX:0,deltaY:0,scale:1}}},computed:{timeStr:function(){var t=Math.floor(this.sudoku.elapsedTime/60);return(t?t+" min ":"")+this.sudoku.elapsedTime%60+" sek"},size:function(){return this.sudoku.xSize*this.sudoku.ySize},cells:function(){return Math.pow(this.size,2)}},methods:{doScroll:function(t){console.log(t.clientX),t.clientX<window.innerHeight&&!this.isSettings&&(t.preventDefault(),this.log=t.wheelDelta,this.transform.scale=Math.min(Math.max(this.transform.scale+t.wheelDelta/500,1),10))},pinchMove:function(t){this.isZooming&&(this.transform.scale=Math.max(1,Math.min(this.lastScale*t.scale,10)))},pinchStart:function(t){this.isZooming=!0},pinchEnd:function(t){this.isZooming=!1,this.lastScale=this.transform.scale},touchPan:function(t){console.log(t),this.transform.deltaX=t.deltaX,this.transform.deltaY=t.deltaY},mouseMove:function(t){t.clientX<window.innerHeight&&(this.transform.x=t.clientX,this.transform.y=t.clientY)},buttonClick:function(t){if(0==t.id)this.helpMode=!this.helpMode;else if(-1==t.id)this.sudoku.field[this.sudoku.active].value=0,this.sudoku.field[this.sudoku.active].help=[];else if(-1!=this.sudoku.active)if(this.helpMode){this.sudoku.field[this.sudoku.active].value=0;var e=this.sudoku.field[this.sudoku.active].help.indexOf(t.id);-1==e?this.sudoku.field[this.sudoku.active].help.push(t.id):this.sudoku.field[this.sudoku.active].help.splice(e,1)}else this.sudoku.field[this.sudoku.active].value=t.id,this.checkSudoku()},cellClick:function(t){this.sudoku.active=t.active},isSolvedSudoku:function(){for(var t=0;t<this.size;t++){console.log(t);for(var e=[0],i=[0],s=[0],n=0;n<this.size;n++){var o=this.sudoku.field[this.size*t+n].value;e.includes(o)||e.push(o);var l=this.sudoku.field[t+this.size*n].value;i.includes(l)||i.push(l);var u=Math.floor(t/this.sudoku.ySize)*this.sudoku.ySize,a=Math.floor(n/this.sudoku.xSize),c=t%this.sudoku.ySize*this.sudoku.xSize,r=n%this.sudoku.xSize,h=(u+a)*this.size+c+r;console.log("cell:"+h);var d=this.sudoku.field[h].value;s.includes(d)||s.push(d)}if(e.length!=this.size+1||i.length!=this.size+1||s.length!=this.size+1)return console.log("row="+e.join(",")+", col:"+i.join(",")+", block:"+s.join(",")),!1}return!0},toggleFullScreen:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},restart:function(){this.isLoading=!0,this.worker.postMessage({cmd:"start",xSize:this.sudoku.xSize,ySize:this.sudoku.ySize,emptyCells:Math.floor(this.settings.difficulty*this.cells/100)})},cancel:function(){this.worker.postMessage("stop"),this.worker.terminate(),this.$localStorage.remove("sudoku"),location.reload()},checkSudoku:function(){console.log("check"),this.isSolvedSudoku()&&(this.isPause=!0,this.isDone=!0)},saveSettings:function(t){this.isSettings=!1,t.save&&(console.log(t),this.settings.style=t.style,this.settings.difficulty=t.difficulty,this.settings.customStyle=t.customStyle,t.xSize==this.sudoku.xSize&&t.ySize==this.sudoku.ySize||(this.sudoku.xSize=t.xSize,this.sudoku.ySize=t.ySize,console.log("Changed settings -> create new sudoku"),this.sudoku.field=[],this.restart()))},handleVisibilityChange:function(){document[this.hidden]&&(this.isPause=!0)},redirect:function(){location.href="/"}},created:function(){var t=this;this.worker=new Worker("static/kudoku.js"),this.worker.addEventListener("message",function(e){if("ok"==e.data.status){var i=e.data.sudoku;t.sudoku.field=[];for(var s=0;s<t.cells;s++){var n=i[s];t.sudoku.field.push({id:s,value:n,fixed:0!=n,help:[]})}t.sudoku.elapsedTime=0,t.isPause=!1,t.isDone=!1,t.isLoading=!1}else console.log("generator: "+e.data)},!1),window.addEventListener("mousewheel",this.doScroll,!1),window.addEventListener("mousemove",this.mouseMove,!1),this.sudoku=this.$localStorage.get("sudoku"),this.settings=this.$localStorage.get("settings"),0==this.sudoku.field.length?this.restart():this.checkSudoku(),window.setInterval(function(){t.isPause||t.isDone||t.isLoading||(t.sudoku.elapsedTime+=1)},1e3),void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),void 0===document.addEventListener||void 0===document[this.hidden]?console.error("The auto pause requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(this.visibilityChange,this.handleVisibilityChange,!1)},watch:{sudoku:{handler:function(t){this.$localStorage.set("sudoku",t)},deep:!0},settings:{handler:function(t){console.log("Saved settings"),this.$localStorage.set("settings",t)},deep:!0}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"buttons",data:function(){return{msg:"Welcome to Your Vue.js App",active:-1}},methods:{clicked:function(t){this.$emit("buttonclicked",{id:t})},btnStr:function(t){return 1==this.settings.style?t<10?t:String.fromCharCode(t+55):2==this.settings.style?String.fromCharCode(t+64):this.settings.style>=3?this.settings.customStyle[t-1]:t}},props:{helpmode:Boolean,size:Number,xSize:Number,settings:Object},computed:{buttons:function(){for(var t=[],e=1;e<=this.size;e++)t.push({id:e,val:this.btnStr(e),help:this.helpmode?"helpmodeColor":""});return t.push({id:0,val:"⇄"}),t.push({id:-1,val:"🗑"}),t},btnWidth:function(){var t=1/this.xSize*90;return console.log(t),t+"%"}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(24),n=i.n(s);e.default={name:"hello",components:{Help:n.a},data:function(){return{msg:"Welcome to Your Vue.js App",active:-1,fontSize:"1em"}},props:{sudoku:Object,settings:Object,transform:Object},computed:{size:function(){return this.sudoku.xSize*this.sudoku.ySize},sudokuRows:function(){for(var t=[],e=0;e<this.sudoku.field.length;e+=this.size)t.push(this.sudoku.field.slice(e,e+this.size));return t},scaleStr:function(){var t=0,e=0,i=this.$el;if(i&&-1!=this.transform.x&&-1!=this.transform.y){var s=i.offsetWidth,n=document.getElementById("table");t=(s/2-this.transform.x)/s*Math.max(n.offsetWidth*this.transform.scale*1.1-s,0),e=(s/2-this.transform.y)/s*Math.max(n.offsetHeight*this.transform.scale*1.1-s,0)}return"transform: translate("+t+"px, "+e+"px) scale("+this.transform.scale+")"}},methods:{getVal:function(t){return 0==t?"0":1==this.settings.style?t<10?t:String.fromCharCode(t+55):2==this.settings.style?String.fromCharCode(t+64):this.settings.style>=3?this.settings.customStyle[t-1]:t},getClass:function(t){var e="cell";return 0==t.value&&(e+=" opaque"),t.id%this.sudoku.xSize==0&&(e+=" thick-border-left"),Math.floor(t.id/this.size)%this.sudoku.ySize==0&&(e+=" thick-border-top"),t.fixed?e+=" fixed":t.id==this.active&&(e+=" active"),e},calcFontSize:function(t){if(this.settings.style>=3){var e=this.getMaxSymbolWidth(this.settings.customStyle,"sans 10px");this.fontSize=Math.min(t/this.size/40*e,24)+"px"}else 0==this.settings.style&&this.size>9?this.fontSize=Math.min(t/this.size/2.5,24)+"px":this.fontSize=Math.min(t/this.size/1.5,24)+"px"},clicked:function(t){this.sudoku.field[t].fixed||(this.active==t?this.active=-1:this.active=t,this.$emit("cellclicked",{active:this.active}))},getMaxSymbolWidth:function(t,e){var i=this.getMaxSymbolWidth.canvas||(this.getMaxSymbolWidth.canvas=document.createElement("canvas")),s=i.getContext("2d");s.font=e;for(var n=0,o=0;o<t.length;o++){var l=s.measureText(t[o]);n<l.width&&(n=l.width)}return n}},mounted:function(){this.calcFontSize(this.$el.offsetWidth)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"help",data:function(){return{msg:"Welcome to Your Vue.js App"}},props:{help:Array,styleIndex:Number},computed:{rows:function(){for(var t=[[0,0,0],[0,0,0],[0,0,0]],e=0;e<this.help.length;e++){var i=this.help[e]-1;t[Math.floor(i/3)][i%3]=this.help[e]}return t}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"settings",data:function(){return{xSize:3,ySize:3,difficulty:3,style:0,custom:"",emoji:"😀,😁,😂,😃,😄,😅,😆,😇,😈,😉,😊,😋,😌,😍,😎,😏,😐,😑,😒,😓,😔,😕,😖,😗,😘,😙,😚,😛,😜,😝,😞,😟,😠,😡,😢,😣,😤,😥,😦,😧,😨,😩,😪,😫,😬,😭,😮,😯,😰,😱,😲,😳,😴,😵,😶,😷,😸,😹,😺,😻,😼,😽,😾,😿,🙀,🙁,🙂,🙃,🙄,🙅,🙆,🙇,🙈,🙉,🙊,🙋,🙌,🙍,🙎,🙏",percentages:[0,20,35,50,62,75]}},methods:{createNew:function(t){this.$emit("createNew",{save:!0,xSize:this.xSize,ySize:this.ySize,difficulty:this.percentages[this.difficulty],style:this.style,customStyle:4==this.style?this.customArr:this.emoji.split(",").slice(0,this.size)})},cancel:function(){this.$emit("createNew",{})},plusSize:function(){this.xSize<=this.ySize?this.xSize++:this.ySize++},minusSize:function(){this.xSize<=this.ySize?this.ySize--:this.xSize--},changeStyle:function(t){"l"==t&&this.size>26||"n+l"==t&&this.size>35||(this.style=t)}},computed:{stylePreview:function(){if(1==this.style)return"1 2 3 4 5 6 7 8 9 a b c d e f g h i j k l m n o p q r s t u v w x y z".substr(0,2*this.size);if(2==this.style)return"a b c d e f g h i j k l m n o p q r s t u v w x y z".substr(0,2*this.size);if(3==this.style)return this.emoji.split(",").slice(0,this.size).join(" ");if(4==this.style)return this.customArr.slice(0,this.size).join(" ");for(var t="",e=1;e<=this.size;e++)t+=e+" ";return t},styleStr:function(){return["Zahlen","Zahlen und Buchstaben","Buchstaben","Emojis","Benutzerdefiniert"][this.style]},styleErr:function(){switch(this.style){case 1:if(this.size>35)return!0;break;case 2:if(this.size>26)return!0;break;case 3:if(this.size>80)return!0;break;case 4:if(this.size>this.customArr.length)return!0}return!1},difficultyStr:function(){return["Gelöst","Sehr leicht","Leicht","Mittel","Schwer","Sehr schwer"][this.difficulty]},size:function(){return this.xSize*this.ySize},emptyCells:function(){return Math.floor(this.percentages[this.difficulty]*this.size*this.size/100)},customArr:function(){return this.custom.split(",")}},created:function(){var t=this.$localStorage.get("sudoku"),e=this.$localStorage.get("settings");this.xSize=t.xSize,this.ySize=t.ySize,this.style=e.style;for(var i=0;i<this.percentages.length;i++)if(e.difficulty==this.percentages[i]){this.difficulty=i;break}this.custom=this.$localStorage.get("custom")},watch:{custom:function(t){this.$localStorage.set("custom",t)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(5),n=i(2),o=i.n(n),l=i(3),u=i.n(l),a=i(4),c=i.n(a);s.a.use(u.a),s.a.use(c.a,{name:"v-touch"}),s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:o.a},localStorage:{sudoku:{type:Object,default:{xSize:3,ySize:3,field:[],elapsedTime:0,active:-1}},settings:{type:Object,default:{style:0,difficulty:50}},custom:{type:String,default:"🚗,🚕,🚙,🚌,🚜,🚛,🚲,🛵,🏍"}}})},,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,i){i(16);var s=i(0)(i(7),i(27),"data-v-2094ebcd",null);t.exports=s.exports},function(t,e,i){i(15);var s=i(0)(i(8),i(26),"data-v-045c65c6",null);t.exports=s.exports},function(t,e,i){i(18);var s=i(0)(i(9),i(29),"data-v-7bfd23a5",null);t.exports=s.exports},function(t,e,i){i(19);var s=i(0)(i(10),i(30),"data-v-b3186cf2",null);t.exports=s.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("table",{style:t.scaleStr,attrs:{id:"table"}},t._l(t.sudokuRows,function(e){return i("tr",t._l(e,function(e){return i("td",{class:t.getClass(e),style:{fontSize:t.fontSize},on:{click:function(i){t.clicked(e.id)}}},[t._v("\n        "+t._s(t.getVal(e.value))+"\n      ")])}))}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout"},[t._l(t.buttons,function(e){return i("button",{class:{helpmodeColor:e.help},style:{width:t.btnWidth},on:{click:function(i){t.clicked(e.id)}}},[t._v("\n        "+t._s(e.val)+"\n  ")])}),t._v(" "),i("div",{staticClass:"notice"},[t._v(t._s(t.helpmode?"Notizen":"Zahlen")+" einfügen")])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"flow"}},[i("header",[i("img",{staticClass:"icon",attrs:{src:"static/icon.png"},on:{click:function(e){t.showMenu=!0}}}),t._v(" "),i("span",[t._v("SUDOKU")])]),t._v(" "),i("span",{staticStyle:{cursor:"pointer"},attrs:{id:"time"},on:{click:function(e){t.isPause=!0}}},[t._v("⏱️ Zeit: "+t._s(t.timeStr))]),t._v(" "),i("Buttons",{attrs:{helpmode:t.helpMode,settings:t.settings,size:t.size,xSize:t.sudoku.xSize,id:"buttons"},on:{buttonclicked:t.buttonClick}})],1),t._v(" "),t.isSettings?i("Settings",{on:{createNew:t.saveSettings}}):t._e(),t._v(" "),i("v-touch",{on:{pinch:t.pinchMove,rotate:t.pinchMove,pinchstart:t.pinchStart,pinchend:t.pinchEnd,pan:t.touchPan}},[i("Field",{attrs:{sudoku:t.sudoku,settings:t.settings,transform:t.transform,id:"field"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.solve(e)},cellclicked:t.cellClick}})],1),t._v(" "),t.showMenu?i("div",{staticClass:"menu",on:{click:function(e){t.showMenu=!1}}},[i("span",{on:{click:t.toggleFullScreen}},[i("img",{attrs:{src:"static/fullscreen.svg"}}),t._v("Vollbild")]),t._v(" "),i("span",{on:{click:t.restart}},[i("img",{attrs:{src:"static/new_sudoku.svg"}}),t._v("Neues Sudoku")]),t._v(" "),i("span",{on:{click:function(e){t.isPause=!0}}},[i("img",{attrs:{src:"static/pause.svg"}}),t._v("Spiel pausieren")]),t._v(" "),i("span",{on:{click:function(e){t.isSettings=!0}}},[i("img",{attrs:{src:"static/settings.svg"}}),t._v("Einstellungen")])]):t._e(),t._v(" "),t.showMenu?i("div",{staticClass:"fullpage",on:{click:function(e){t.showMenu=!1}}}):t._e(),t._v(" "),t.isPause&&!t.isSettings?i("div",{staticClass:"shadow fullpage",on:{click:function(e){t.isPause=!1}}}):t._e(),t._v(" "),t.isPause&&!t.isSettings?i("div",{staticClass:"dialog"},[i("h2",[t._v(t._s(t.isDone?"Herzlichen Glückwunsch":"Pause"))]),t._v(" "),i("div",[t._v(t._s(t.isDone?"Sudoku in "+t.timeStr+" gelöst.":"Das Spiel ist pausiert."))]),t._v(" "),i("button",{on:{click:function(e){t.isPause=!1}}},[t._v(t._s(t.isDone?"Schließen":"Fortsetzen"))])]):t._e(),t._v(" "),t.isLoading?i("div",{staticClass:"shadow fullpage"}):t._e(),t._v(" "),t.isLoading?i("div",{staticClass:"dialog"},[i("h2",[t._v("Bitte Warten")]),t._v(" "),i("img",{attrs:{src:"static/loading.gif"}}),t._v(" "),i("span",[t._v("Sudoku wird generiert")]),t._v(" "),i("button",{on:{click:t.cancel}},[t._v("Abbrechen")])]):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"help"},[i("table",t._l(t.rows,function(e){return i("tr",t._l(e,function(e){return i("td",{class:{opaque:!e}},[t._v("\n        "+t._s(e)+"\n      ")])}))}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("h1",[t._v("Einstellungen")]),t._v(" "),i("div",{staticClass:"card"},[i("h2",[t._v("Sudokugröße")]),t._v(" "),i("img",{attrs:{src:"static/cancel.svg"},on:{click:t.cancel}}),t._v(" "),i("button",{staticClass:"small minus",attrs:{disabled:t.xSize<=2},on:{click:t.minusSize}},[t._v("-")]),t._v(" "),i("button",{staticClass:"small plus",on:{click:t.plusSize}},[t._v("+")]),t._v(" "),i("span",[t._v(t._s(t.xSize)+"x"+t._s(t.ySize))]),i("br"),t._v(" "),i("span",[t._v("Feldgröße: "+t._s(t.size)+"x"+t._s(t.size)+", Feldanzahl: "+t._s(t.size*t.size))])]),t._v(" "),i("div",{staticClass:"card"},[i("h2",[t._v("Schwierigkeit")]),t._v(" "),i("button",{staticClass:"small minus",attrs:{disabled:t.difficulty<=0},on:{click:function(e){t.difficulty--}}},[t._v("-")]),t._v(" "),i("button",{staticClass:"small plus",attrs:{disabled:t.difficulty>=5},on:{click:function(e){t.difficulty++}}},[t._v("+")]),t._v(" "),i("span",[t._v(t._s(t.difficultyStr))]),i("br"),t._v(" "),i("span",[t._v("Etwa "+t._s(t.emptyCells)+" freie Felder")])]),t._v(" "),i("div",{staticClass:"card"},[i("h2",[t._v("Stil")]),t._v(" "),i("button",{staticClass:"small minus",attrs:{disabled:t.style<=0},on:{click:function(e){t.style--}}},[t._v("←")]),t._v(" "),i("button",{staticClass:"small plus",attrs:{disabled:t.style>=4},on:{click:function(e){t.style++}}},[t._v("→")]),t._v(" "),i("span",[t._v(t._s(t.styleStr))]),t._v(" "),4==t.style?i("input",{directives:[{name:"model",rawName:"v-model",value:t.custom,expression:"custom"}],attrs:{placeholder:"Zeichen durch Komma trennen",type:"text"},domProps:{value:t.custom},on:{input:function(e){e.target.composing||(t.custom=e.target.value)}}}):t._e(),t._v(" "),i("br"),i("span",{staticStyle:{display:"inline"}},[t._v("Vorschau: ")]),t._v(" "),i("span",{staticStyle:{display:"inline-block","text-transform":"uppercase","font-family":"sans"}},[t._v(t._s(t.stylePreview))]),t._v(" "),t.styleErr?i("span",{staticStyle:{color:"#F00"}},[t._v("Stil enthält zu wenig Zeichen für gewählte Größe")]):t._e()]),t._v(" "),t.size>=36?i("div",{staticClass:"card"},[i("span",{staticClass:"warning"},[t._v("Achtung")]),t._v(" "),i("span",[t._v("Die Berechnung kann mehrere Minuten dauern.")]),t._v(" "),i("span",[t._v("Exponentieller Anstieg der Rechenzeit mit der Sudokugröße.")])]):t._e(),t._v(" "),i("br"),t._v(" "),i("button",{attrs:{disabled:t.styleErr},on:{click:t.createNew}},[t._v("Speichern")]),t._v(" "),i("button",{on:{click:t.cancel}},[t._v("Abbrechen")]),t._v(" "),i("br"),i("br")])},staticRenderFns:[]}}],[11]);
//# sourceMappingURL=app.49bc90a72a3835a15545.js.map